// Notion-style CSS based on NotionPresso design system
// Reference: https://notionpresso.com & https://github.com/notionpresso/nextjs-blog-template

// Notion CSS Variables
:root {
  --notion-font: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --notion-max-width: 1000px;
  --notion-indent: 27px;
  
  // Notion Colors
  --fg-color: rgb(55, 53, 47);
  --fg-color-0: rgba(55, 53, 47, 0.09);
  --fg-color-1: rgba(55, 53, 47, 0.16);
  --fg-color-2: rgba(55, 53, 47, 0.4);
  --fg-color-3: rgba(55, 53, 47, 0.6);
  --fg-color-4: rgba(55, 53, 47, 0.8);
  --fg-color-5: rgba(55, 53, 47, 0.65);
  --fg-color-6: rgba(55, 53, 47, 1);
  
  --bg-color: #fff;
  --bg-color-0: rgba(135, 131, 120, 0.15);
  --bg-color-1: rgb(251, 251, 250);
  --bg-color-2: rgba(135, 131, 120, 0.1);
  
  --select-color: rgba(45, 170, 219, 0.3);
  --main-border-color: rgba(55, 53, 47, 0.09);
  
  // Link colors
  --link-color: rgb(35, 131, 226);
  --link-hover: rgba(35, 131, 226, 0.8);
}

// Body 배경 설정
body {
  background: var(--bg-color) !important;
}

// Notion 스타일 포스트
.post.notion-style {
  max-width: var(--notion-max-width);
  margin: 0 auto;
  padding: 32px 24px 24px;
  font-family: var(--notion-font);
  color: var(--fg-color-6);
  font-size: 16px;
  line-height: 1.65;
  word-break: break-word;
  
  @media (max-width: 768px) {
    padding: 24px 16px 16px;
  }
  
  // 포스트 헤더
  > header {
    margin-bottom: 48px;
    
    .post-title {
      font-size: 40px;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 8px;
      color: var(--fg-color-6);
      letter-spacing: -0.003em;
      
      @media (max-width: 768px) {
        font-size: 32px;
      }
    }
    
    .post-date {
      font-size: 14px;
      color: var(--fg-color-5);
      margin-bottom: 16px;
      line-height: 1.5;
    }
    
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      
      .tag {
        display: inline-flex;
        align-items: center;
        height: 24px;
        padding: 0 8px;
        border-radius: 3px;
        background: var(--bg-color-1);
        font-size: 14px;
        line-height: 120%;
        color: var(--fg-color-6);
        white-space: nowrap;
      }
    }
    
    .message {
      display: none;
    }
  }
  
  // Typography
  h1, h2, h3 {
    font-weight: 600;
    line-height: 1.3;
    margin-top: 2em;
    margin-bottom: 4px;
    color: var(--fg-color-6);
  }
  
  h1 {
    font-size: 2em;
    margin-top: 2em;
  }
  
  h2 {
    font-size: 1.5em;
    margin-top: 1.4em;
  }
  
  h3 {
    font-size: 1.25em;
    margin-top: 1em;
  }
  
  h4, h5, h6 {
    font-size: 1.125em;
    font-weight: 600;
    line-height: 1.3;
    margin-top: 1em;
    margin-bottom: 1px;
    color: var(--fg-color-6);
  }
  
  p {
    margin: 1px 0 1px 0;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
  }
  
  // Lists
  ul, ol {
    margin: 1px 0;
    padding-left: var(--notion-indent);
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    li {
      margin: 0.25em 0;
      line-height: 1.65;
      
      p {
        margin: 0;
      }
      
      > ul, > ol {
        margin: 0.125em 0;
      }
    }
  }
  
  // Links - COMMENTED OUT TO USE ORIGINAL THEME STYLES
  /*
  a {
    color: inherit;
    word-break: break-word;
    text-decoration: underline;
    text-decoration-color: var(--fg-color-2);
    text-underline-offset: 0.05em;
    transition: text-decoration-color 120ms ease-in 0s;
    
    &:hover {
      text-decoration-color: var(--fg-color-4);
    }
  }
  */
  
  // Blockquotes
  blockquote {
    width: 100%;
    margin: 4px 0;
    padding-left: 14px;
    border-left: 3px solid var(--fg-color-6);
    font-size: 1em;
    line-height: 1.65;
    color: var(--fg-color-6);
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    p {
      margin: 0;
    }
    
    // Fix double underline issue in blockquote links - NOT NEEDED ANYMORE
    /*
    a {
      color: inherit;
      text-decoration: underline;
      text-decoration-color: var(--fg-color-2);
      text-underline-offset: 0.05em;
      
      &:hover {
        text-decoration-color: var(--fg-color-4);
      }
    }
    */
  }
  
  // Code
  code {
    color: #eb5757;
    background: var(--bg-color-0);
    border-radius: 3px;
    font-size: 85%;
    padding: 0.2em 0.4em;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
    line-height: normal;
  }
  
  pre {
    margin: 4px 0;
    padding: 16px;
    overflow: auto;
    background: var(--bg-color-1);
    border-radius: 3px;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    code {
      color: var(--fg-color-6);
      background: transparent;
      font-size: 14px;
      line-height: 1.4;
      padding: 0;
      white-space: pre;
      word-break: normal;
      border-radius: 0;
    }
  }
  
  // Tables
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1px 0;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    th, td {
      border: 1px solid var(--main-border-color);
      padding: 8px;
      text-align: left;
      font-size: 14px;
    }
    
    th {
      background: var(--bg-color-1);
      color: var(--fg-color-6);
      font-weight: 500;
    }
    
    tbody tr:hover {
      background-color: var(--bg-color-2);
    }
  }
  
  // Images
  img {
    max-width: 100%;
    height: auto;
    margin: 4px 0;
    border-radius: 1px;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
  }
  
  // Horizontal rules
  hr {
    width: 100%;
    border: none;
    border-bottom: 1px solid var(--main-border-color);
    margin: 2em 0;
  }
  
  // Strong and emphasis
  strong, b, **:not(ul):not(ol) {
    font-weight: 600 !important;
    color: var(--fg-color-6) !important;
  }
  
  // Ensure bold in paragraphs, lists, tables, etc
  p strong, p b,
  li strong, li b,
  td strong, td b,
  th strong, th b,
  blockquote strong, blockquote b,
  .notion-callout strong, .notion-callout b {
    font-weight: 600 !important;
    color: inherit !important;
  }
  
  em, i {
    font-style: italic;
  }
  
  // 노션 스타일 콜아웃 블록 (실제 노션 디자인)
  .notion-callout {
    width: 100%;
    padding: 16px 16px 16px 12px;
    margin: 4px 0 4px 0;
    border-radius: 3px;
    display: flex;
    align-items: flex-start;
    background: rgb(251, 251, 250);
    border: none;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    .callout-emoji {
      font-size: 1.25em;
      line-height: 1;
      flex-shrink: 0;
      user-select: none;
      margin-right: 12px;
      margin-top: 2px;
      width: 24px;
      display: flex;
      justify-content: center;
    }
    
    .callout-content {
      flex: 1;
      min-width: 0;
      font-size: 16px;
      line-height: 1.5;
      color: var(--fg-color-6);
      
      p {
        margin: 0;
        line-height: 1.5;
        
        &:not(:last-child) {
          margin-bottom: 0.5em;
        }
        
        // Bold 텍스트 처리
        strong, b {
          font-weight: 600;
          color: var(--fg-color-6);
        }
      }
      
      h1, h2, h3, h4, h5, h6 {
        margin-top: 0;
        margin-bottom: 0.5em;
        font-weight: 600;
      }
      
      ul, ol {
        margin: 0.5em 0;
        padding-left: 1.5em;
      }
      
      // 콜아웃 내부 링크 스타일 - COMMENTED OUT TO USE ORIGINAL
      /*
      a {
        color: inherit;
        text-decoration: underline;
        text-decoration-color: var(--fg-color-2);
        
        &:hover {
          text-decoration-color: var(--fg-color-4);
        }
      }
      */
      
      // 콜아웃 내부 코드 스타일
      code {
        font-size: 85%;
        padding: 0.2em 0.4em;
        background: rgba(135, 131, 120, 0.15);
        border-radius: 3px;
        color: #eb5757;
      }
    }
    
    // 노션의 기본 회색 배경 스타일
    &.default {
      background: rgb(251, 251, 250);
    }
    
    // 파란색 정보 스타일
    &.info {
      background: rgb(227, 243, 255);
      
      .callout-content {
        color: rgb(12, 71, 113);
        
        strong, b {
          color: rgb(12, 71, 113);
        }
      }
    }
    
    // 노란색 경고 스타일
    &.warning {
      background: rgb(251, 243, 219);
      
      .callout-content {
        color: rgb(90, 71, 11);
        
        strong, b {
          color: rgb(90, 71, 11);
        }
      }
    }
    
    // 빨간색 에러/위험 스타일
    &.error {
      background: rgb(253, 235, 236);
      
      .callout-content {
        color: rgb(119, 33, 46);
        
        strong, b {
          color: rgb(119, 33, 46);
        }
      }
    }
    
    // 초록색 성공 스타일
    &.success {
      background: rgb(227, 252, 239);
      
      .callout-content {
        color: rgb(15, 81, 50);
        
        strong, b {
          color: rgb(15, 81, 50);
        }
      }
    }
    
    // 보라색 노트 스타일
    &.note {
      background: rgb(241, 238, 252);
      
      .callout-content {
        color: rgb(60, 45, 109);
        
        strong, b {
          color: rgb(60, 45, 109);
        }
      }
    }
    
    // 청록색 팁 스타일
    &.tip {
      background: rgb(227, 252, 250);
      
      .callout-content {
        color: rgb(15, 81, 73);
        
        strong, b {
          color: rgb(15, 81, 73);
        }
      }
    }
  }
}

// About과 Related Posts 섹션 노션 스타일링
.post.notion-style + .post-addons-container {
  max-width: var(--notion-max-width);
  margin: 0 auto;
  padding: 0 48px 200px;
  font-family: var(--notion-font);
  color: var(--fg-color-6);
  
  @media (max-width: 768px) {
    padding: 0 24px 150px;
  }
  
  hr.dingbat {
    display: none;
  }
  
  // About 섹션 깔끔하고 세련된 스타일
  .about {
    margin-bottom: 2rem;
    padding: 16px 0 20px;
    background: transparent;
    border: none;
    border-bottom: 2px solid var(--fg-color-0);
    
    .author {
      .page-title {
        font-size: 14px !important;
        font-weight: 600 !important;
        color: var(--fg-color-6) !important;
        margin: 0 0 8px 0 !important;
        line-height: 1.3 !important;
        border: none !important;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        
        &::after {
          display: none !important;
        }
      }
      
      p {
        font-size: 13px !important;
        line-height: 1.5 !important;
        color: var(--fg-color-5) !important;
        margin: 0 0 6px 0 !important;
        
        &:last-child {
          margin-bottom: 0 !important;
        }
      }
      
      .sidebar-social {
        margin-top: 8px;
        display: flex;
        gap: 4px;
        
        a {
          color: var(--fg-color-3) !important;
          text-decoration: none;
          font-size: 11px;
          padding: 2px 6px;
          background: transparent;
          border-radius: 3px;
          transition: all 120ms ease;
          border: 1px solid transparent;
          
          &:hover {
            background: var(--bg-color-0);
            color: var(--link-color) !important;
            border-color: var(--main-border-color);
          }
        }
      }
    }
  }
  
  // Related Posts 컴팩트한 리스트 스타일 - COMMENTED OUT TO USE ORIGINAL
  /*
  .related {
    margin: 0;
    padding-top: 16px;
    background: var(--bg-color);
    
    .hr {
      font-size: 14px !important;
      font-weight: 600 !important;
      color: var(--fg-color-6) !important;
      margin: 0 0 8px 0 !important;
      line-height: 1.3 !important;
      border: none !important;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      
      &::after {
        display: none !important;
      }
    }
    
    .related-posts {
      list-style: none;
      padding: 0;
      margin: 0;
      
      li {
        padding: 2px 0 !important;
        border-bottom: 1px solid rgba(55, 53, 47, 0.08);
        height: auto !important;
        min-height: unset !important;
        max-height: none !important;
        line-height: 1.2 !important;
        
        &:last-child {
          border-bottom: none;
        }
        
        .flip-title {
          display: inline-block !important;
          margin: 0 !important;
          padding: 0 !important;
          text-decoration: none !important;
          font-size: 13px !important;
          line-height: 1.2 !important;
          height: auto !important;
          // Remove h4 styles
          font-weight: 500 !important;
          // Disable FLIP animations
          transform: none !important;
          transition: none !important;
          animation: none !important;
          will-change: auto !important;
          
          &.h4 {
            font-size: 13px !important;
            margin: 0 !important;
            padding: 0 !important;
            line-height: 1.2 !important;
          }
          
          span {
            font-size: 13px !important;
            font-weight: 500 !important;
            color: var(--fg-color-6) !important;
            line-height: 1.2 !important;
            transition: color 120ms ease;
            // Prevent position changes
            transform: none !important;
            position: static !important;
          }
          
          &:hover span {
            color: var(--link-color) !important;
          }
        }
        
        time {
          font-size: 11px !important;
          color: var(--fg-color-5) !important;
          margin-left: 8px !important;
          display: inline !important;
          line-height: 1.2 !important;
          padding: 0 !important;
          height: auto !important;
          
          &.heading {
            font-size: 11px !important;
            margin: 0 0 0 8px !important;
            padding: 0 !important;
            line-height: 1.2 !important;
          }
        }
      }
    }
  }
  */
}

// 기존 Hydejack 스타일 오버라이드
.post.notion-style {
  .highlighter-rouge {
    margin: 4px 0;
    
    &:not(:last-child) {
      margin-bottom: 1em;
    }
    
    .highlight {
      background: var(--bg-color-1);
      padding: 16px;
      border-radius: 3px;
      
      pre {
        margin: 0;
        padding: 0;
        background: transparent;
      }
    }
  }
}

// 노션 포스트 페이지 전체 스타일
.layout-post {
  main {
    max-width: 100%;
    padding: 0;
    background: var(--bg-color);
  }
  
  .content {
    max-width: 100%;
    padding: 0;
    margin: 0;
  }
  
  #_main {
    max-width: 100%;
  }
}

// 진행률 표시기 % 텍스트 위치 수정
.progress-ring-container {
  .progress-percentage {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 10px;
    font-weight: 600;
    color: var(--fg-color-6);
    line-height: 1;
    white-space: nowrap;
    
    &.progress-text-fixed {
      // JavaScript에서 추가된 클래스용 추가 스타일
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
}

// Selection styling
::selection {
  background: var(--select-color);
}

::-moz-selection {
  background: var(--select-color);
}

// FLIP animation overrides - COMMENTED OUT TO USE ORIGINAL
/*
// Completely disable FLIP animations for related posts
.related-posts {
  .flip-title,
  .flip-title *,
  [data-flip],
  a[href] {
    transform: none !important;
    transition: none !important;
    animation: none !important;
    will-change: auto !important;
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    opacity: 1 !important;
  }
}

// Override Hydejack's FLIP animation completely
.flip-title {
  &[data-flip],
  &.animating {
    transform: none !important;
    transition: none !important;
    animation: none !important;
  }
}

// Ensure Related Posts links stay in place during navigation
.related-posts li a {
  display: block !important;
  position: relative !important;
  transform: translateX(0) translateY(0) !important;
  opacity: 1 !important;
}

// Force disable all animations during page transition
body.hy-push-state-animating {
  .related-posts {
    * {
      transform: none !important;
      transition: none !important;
      animation: none !important;
    }
  }
}

// Prevent title movement during navigation
.flip-title.animating {
  position: static !important;
  transform: none !important;
  opacity: 1 !important;
}
*/